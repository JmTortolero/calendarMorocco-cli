<div class="upload-container">
  <div class="form-group">
    <div class="config-header">
      <label for="configSelect">{{ 'calendar.configLabel' | translate }}</label>
      <button
        type="button"
        (click)="refreshConfig()"
        [disabled]="configLoading"
        class="refresh-config-btn"
        title="Actualizar opciones de configuraci√≥n">
        {{ configLoading ? 'üîÑ' : '‚ü≥' }}
      </button>
    </div>

    <select
      id="configSelect"
      [(ngModel)]="selectedConfig"
      class="form-control"
      [disabled]="configLoading || configOptions.length === 0">
      <option value="">
        {{ configLoading ? 'Cargando opciones...' :
           (configOptions.length === 0 ? 'No hay opciones disponibles' : ('calendar.selectConfig' | translate)) }}
      </option>
      <option *ngFor="let config of configOptions" [value]="config.value">
        {{ config.labelKey | translate }}{{ config.description ? ' - ' + config.description : '' }}
      </option>
    </select>
  </div>

  <div class="form-group">
    <label for="excelFile">{{ 'calendar.excelLabel' | translate }}</label>
    <input
      id="excelFile"
      type="file"
      accept=".xlsx,.xls"
      (change)="onFileChange($event, 'excel')"
      class="form-control">
    <small *ngIf="!excelFile" class="help-text">{{ 'calendar.noFileSelected' | translate }}</small>
    <small *ngIf="excelFile" class="file-selected">‚úì {{ excelFile.name }}</small>
  </div>

  <button
    (click)="generateCalendar()"
    [disabled]="loading || configLoading || !selectedConfig || !excelFile || configOptions.length === 0"
    class="generate-button">
    {{ loading ? ('calendar.loading' | translate) : ('calendar.generateButton' | translate) }}
  </button>

  <!-- Informaci√≥n adicional sobre el estado -->
  <div class="generation-info">
    <small *ngIf="configLoading" class="info-text">
      üîÑ Cargando opciones de configuraci√≥n...
    </small>
    <small *ngIf="!configLoading && configOptions.length === 0" class="warning-text">
      ‚ö†Ô∏è No se pueden generar calendarios sin opciones de configuraci√≥n v√°lidas
    </small>
  </div>

  <div *ngIf="error" class="error">{{ error }}</div>
  <div *ngIf="success" class="success">{{ success }}</div>
</div>
