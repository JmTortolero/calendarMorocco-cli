<div class="properties-manager-container">
  <h2>{{ currentTranslationService.translate('propertiesManager.title') || 'Properties Manager' }}</h2>

  <div class="section property-selector">
    <div class="title-with-actions">
      <h3>{{ currentTranslationService.translate('propertiesManager.propertiesTitle') || 'Properties Files' }}</h3>
      <button
        class="refresh-button"
        (click)="refreshProperties()"
        [disabled]="configLoading() || loading()">
        {{ currentTranslationService.translate('propertiesManager.refresh') || 'Refresh' }}
      </button>
      <button
        class="edit-button"
        (click)="goToPropertiesEditor()"
        [disabled]="loading()">
        {{ currentTranslationService.translate('propertiesManager.manageFiles') || 'Manage Files' }}
      </button>
    </div>

    @if (configLoading()) {
      <div class="loading-indicator">
        {{ currentTranslationService.translate('propertiesManager.loading') || 'Loading properties files...' }}
      </div>
    }

    @if (!configLoading()) {
      <div class="property-selector-content">
        <div class="select-container">
          <label for="propertyFile">{{ currentTranslationService.translate('propertiesManager.selectProperty') || 'Select property file:' }}</label>
          <select
            id="propertyFile"
            [(ngModel)]="selectedPropertyFile"
            (change)="onPropertyFileSelected()"
            [disabled]="loading() || propertyFiles().length === 0">
            <option value="">{{ currentTranslationService.translate('propertiesManager.selectOption') || '-- Select a file --' }}</option>
            @for (file of propertyFiles(); track file.name) {
              <option [value]="file.name">
                {{ file.displayName }}
              </option>
            }
          </select>
        </div>
      </div>
    }
  </div>

  @if (selectedPropertyFile()) {
    <div class="section property-content">
      <h3>{{ currentTranslationService.translate('propertiesManager.fileContent') || 'File Content:' }} {{ selectedPropertyFile() }}</h3>

      @if (isLoadingPropertyContent()) {
        <div class="loading-indicator">
          {{ currentTranslationService.translate('propertiesManager.loadingContent') || 'Loading file content...' }}
        </div>
      }

      @if (!isLoadingPropertyContent() && selectedPropertyContent()) {
        <pre class="content-preview">{{ selectedPropertyContent() }}</pre>
      }

      @if (!isLoadingPropertyContent() && !selectedPropertyContent()) {
        <div class="empty-content">
          {{ currentTranslationService.translate('propertiesManager.noContent') || 'No content available' }}
        </div>
      }
    </div>
  }

  <div class="actions">
    <button
      class="download-button"
      (click)="downloadSelectedProperty()"
      [disabled]="loading() || !selectedPropertyFile()">
      @if (!loading()) {
        <span>{{ currentTranslationService.translate('propertiesManager.download') || 'Download Properties File' }}</span>
      }
      @if (loading()) {
        <span>{{ currentTranslationService.translate('propertiesManager.downloading') || 'Downloading...' }}</span>
      }
    </button>
  </div>

  <div class="messages">
    @if (error()) {
      <div class="error-message">{{ error() }}</div>
    }
    @if (success()) {
      <div class="success-message">{{ success() }}</div>
    }
  </div>
</div>
